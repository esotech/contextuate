# Git Conventions

> **Purpose:** Standardized git workflow conventions for AI assistants. Load this file when performing git operations (commits, branches, PRs, merges).

---

## AI Attribution Policy

**Default: Do NOT include AI attribution in commits or PRs.**

When creating git commits or pull requests:
- Do NOT add `Co-Authored-By` lines mentioning AI tools
- Do NOT mention that code was "generated by AI" or "written with Claude/Copilot/etc."
- Do NOT add comments in code indicating AI authorship
- Commit messages should read as if written by the human developer

> **Override:** Projects can enable AI attribution in their `context.md` under Project Preferences. If `ai_attribution: true` is set, include appropriate co-author lines.

---

## Commit Messages

### Format

```
<type>: <subject>

[optional body]

[optional footer]
```

### Types

| Type | Description |
|------|-------------|
| `feat` | New feature |
| `fix` | Bug fix |
| `docs` | Documentation only |
| `style` | Formatting, no code change |
| `refactor` | Code restructuring, no behavior change |
| `perf` | Performance improvement |
| `test` | Adding/updating tests |
| `chore` | Maintenance, dependencies, build |

### Guidelines

- **Subject line:** 50 characters max, imperative mood ("Add feature" not "Added feature")
- **Body:** Wrap at 72 characters, explain *what* and *why* (not *how*)
- **Footer:** Reference issues/tickets (e.g., `Fixes #123`, `Closes #456`)

### Examples

```
feat: Add user authentication flow

Implement JWT-based authentication with refresh tokens.
Sessions expire after 24 hours of inactivity.

Closes #42
```

```
fix: Prevent crash when config file missing

Check for file existence before parsing.
Return default config if file not found.
```

---

## Branch Naming

### Format

```
<type>/<short-description>
```

### Common Prefixes

| Prefix | Purpose |
|--------|---------|
| `feature/` | New features |
| `fix/` | Bug fixes |
| `hotfix/` | Urgent production fixes |
| `refactor/` | Code improvements |
| `docs/` | Documentation |
| `test/` | Test additions |
| `chore/` | Maintenance tasks |

### Guidelines

- Use lowercase with hyphens: `feature/user-authentication`
- Keep descriptions short but meaningful
- Include ticket numbers if applicable: `fix/123-login-crash`

---

## Pull Requests

### Title Format

Same as commit message subject: `<type>: <description>`

### Description Template

```markdown
## Summary
Brief description of what this PR does.

## Changes
- Change 1
- Change 2

## Testing
How to test these changes.

## Related Issues
Fixes #123
```

### Guidelines

- Keep PRs focused on a single concern
- Include context for reviewers
- Link related issues
- Add screenshots for UI changes

---

## Merge Strategy

### Preferences (check project conventions)

| Strategy | When to Use |
|----------|-------------|
| **Merge commit** | Default for feature branches, preserves history |
| **Squash** | When PR has many small/WIP commits |
| **Rebase** | For linear history (if project prefers) |

### Before Merging

1. Ensure CI passes
2. Get required approvals
3. Resolve all conflicts
4. Update branch if base has changed

---

## Conflict Resolution

When resolving merge conflicts:

1. **Understand both changes** - Don't blindly accept one side
2. **Preserve intent** - Combine changes when both are needed
3. **Test after resolution** - Conflicts can introduce bugs
4. **Document complex resolutions** - Add context in commit message

---

## Project Overrides

Projects can customize these conventions in `docs/ai/standards/git.standards.md`:

```markdown
# Project Git Standards

## Overrides
- Branch prefix: `{project-prefix}/`
- Commit format: {custom format}
- AI Attribution: enabled/disabled
```

When project-specific standards exist, they take precedence over these defaults.
